# 私有 AI 对话网站 - 部署准备清单（自托管版）

> 本文档列出搭建此项目所需购买或配置的所有资源（v2.0 自托管方案）

---

## 一、必需资源

### 1. 云服务器

| 项目 | 推荐配置 | 预估价格 |
|------|----------|----------|
| **供应商** | 阿里云 / 腾讯云 / 华为云 / AWS / Vultr 等 | - |
| **地域** | 靠近用户群体（国内选国内，海外选香港/新加坡） | - |
| **CPU** | 1-2 核 | - |
| **内存** | 2 GB | - |
| **系统盘** | 40 GB SSD | - |
| **带宽** | 3-5 Mbps（SSE 流式传输需要稳定带宽） | - |
| **操作系统** | Ubuntu 22.04 LTS / Debian 12 | - |
| **预估月费** | 国内轻量服务器约 ¥60-100/月 | ¥60-100 |

**推荐选择：**
- **国内用户**：阿里云轻量应用服务器（2核2G，约 ¥60/月）
- **海外用户**：Vultr / DigitalOcean（$5-10/月）
- **注意事项**：国内服务器域名需备案，海外服务器无需备案

---

### 2. 域名

| 项目 | 说明 | 预估价格 |
|------|------|----------|
| **域名后缀** | .com / .net / .org 等 | - |
| **购买渠道** | 阿里云万网 / 腾讯云 DNSPod / Namecheap | - |
| **年费** | .com 约 ¥60-80/年 | ¥5-7/月 |
| **DNS 解析** | 云厂商免费提供 | 免费 |

**配置要求：**
- 购买后将域名 A 记录指向云服务器公网 IP
- 可选：配置 Cloudflare CDN 提升海外访问速度

---

### 3. AI API 服务

| 项目 | 说明 | 预估价格 |
|------|------|----------|
| **API 格式** | Anthropic 兼容格式（/v1/messages） | 按使用量计费 |
| **供应商选项** | 自建 / 第三方中转 / 官方 Claude API | - |
| **计费方式** | 按 Token 消耗计费 | - |

---

## 二、可选资源

### 4. SSL 证书（HTTPS）

| 方案 | 说明 | 价格 |
|------|------|------|
| **Let's Encrypt** | 免费自动签发，Certbot 自动续期 | 免费 |
| **云厂商证书** | 阿里云/腾讯云提供免费 SSL 证书 | 免费 |

**推荐：** 使用 Let's Encrypt 免费证书

---

### 5. 对象存储（可选）

本项目当前版本不强制需要对象存储。

---

### 6. 监控与日志（可选）

| 项目 | 说明 | 预估价格 |
|------|------|----------|
| **UptimeRobot** | 服务可用性监控 | 免费版可用 |
| **阿里云监控** | 云服务器基础监控 | 免费 |

---

## 三、费用汇总

### 最低配置

| 项目 | 费用 |
|------|------|
| 云服务器（1核2G，国内轻量） | ¥60/月 |
| 域名（.com） | ¥60/年（¥5/月） |
| SSL 证书（Let's Encrypt） | 免费 |
| **合计** | **约 ¥65/月** |

### 推荐配置

| 项目 | 费用 |
|------|------|
| 云服务器（2核4G） | ¥100/月 |
| 域名（.com） | ¥60/年（¥5/月） |
| SSL 证书（免费） | 免费 |
| **合计** | **约 ¥105/月** |

---

## 四、准备清单检查表

### 云服务器
- [ ] 已购买云服务器并获取公网 IP
- [ ] 已通过 SSH 成功登录服务器
- [ ] 已安装 Docker 和 Docker Compose
- [ ] （可选）已配置域名解析到服务器 IP

### 本地开发环境
- [ ] 已安装 Node.js 20+
- [ ] 已安装 pnpm
- [ ] 已安装 Git

### AI API
- [ ] 已确认 AI API 服务可用
- [ ] 已获取 AI API 基础地址
- [ ] 已获取 AI API Key
- [ ] 已测试 API 连通性

---

## 五、部署步骤概览

```bash
# 1. 服务器准备（SSH 登录后）
curl -fsSL https://get.docker.com | sh

# 2. 克隆项目
git clone <your-repo>
cd ai-chat-site

# 3. 配置环境变量
cp .env.example .env
# 编辑 .env 文件

# 4. 启动服务
docker-compose up -d

# 5. 访问应用
# http://your-domain.com
```

---

## 六、技术方案对比

### 自托管方案（v2.0）vs Supabase 方案（v1.1）

| 对比项 | 自托管 v2.0 | Supabase v1.1 |
|--------|-------------|---------------|
| **数据控制权** | 完全自主 | 托管在第三方 |
| **外部依赖** | 仅 AI API | Supabase + AI API |
| **长期成本** | 固定（服务器费用） | 可能增长（按用量） |
| **运维工作** | 需自行备份数据库 | Supabase 自动备份 |
| **部署复杂度** | 单机一键部署 | 需配置外部服务 |

**选择建议：**
- 注重**数据自主可控** → 选择 v2.0 自托管方案
- 希望**零运维** → 选择 v1.1 Supabase 方案
